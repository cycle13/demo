<!DOCTYPE html>
<html>
     <head>
          <meta charset="utf-8">
          <title>淮阳区各乡镇PM10小时浓度变化图</title>
          <!-- 引入 echarts.js -->
          <script src="https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts.min.js"></script>
         <script src="china.js"></script>
<!--         <script src="https://gallerybox.echartsjs.com/dep/echarts/map/js/china.js"></script>-->
          <script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.min.js"></script>
     </head>
    <body>
        <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
        <div style="height: 550px;width: 1200px;" id="main"></div>
        <script type="text/javascript">
    var myChart = echarts.init(document.getElementById("main"));
    var points = [
                  {name:'齐老乡',value: [114.7673456406, 33.8556853640],itemStyle:{color:'#f5a305'}}
                  , {name:'安岭镇',value: [114.8619113979, 33.8577170347],itemStyle:{color:'#f5a305'}}
                  , {name:'临蔡镇',value: [114.9405742913, 33.8460605051],itemStyle:{color:'#f5a305'}}
                  , {name:'四通镇',value: [115.0313611624, 33.8876433484],itemStyle:{color:'#f5a305'}}
                  , {name:'黄集乡',value: [115.0445592514, 33.8220279168],itemStyle:{color:'#f5a305'}}
                  , {name:'葛店乡',value: [115.0183104268, 33.7600301652],itemStyle:{color:'#f5a305'}}
                  , {name:'白楼镇',value: [114.8840146961, 33.7889189614],itemStyle:{color:'#f5a305'}}
                  , {name:'郑集乡',value: [114.7880708088, 33.7296315408],itemStyle:{color:'#f5a305'}}
                  , {name:'曹河乡',value: [114.7141915316, 33.7283079533],itemStyle:{color:'#f5a305'}}
                  , {name:'大连乡',value: [114.9749021794, 33.7066800312],itemStyle:{color:'#f5a305'}}
                  , {name:'王店乡',value: [114.8550179025, 33.6628176004],itemStyle:{color:'#f5a305'}}
                  , {name:'刘振屯乡',value: [114.9253261969, 33.6183475856],itemStyle:{color:'#f5a305'}}
                  , {name:'冯塘乡',value: [115.0116472325, 33.5826183864],itemStyle:{color:'#f5a305'}}
                  , {name:'新站镇',value: [114.8778877286, 33.5432307520],itemStyle:{color:'#f5a305'}}
                  , {name:'朱集乡',value: [114.9484521712, 33.5187274355],itemStyle:{color:'#f5a305'}}
                  , {name:'鲁台镇',value: [115.0336627571, 33.4866178504],itemStyle:{color:'#f5a305'}}
                  , {name:'豆门乡',value: [114.9771647573, 33.4428670770],itemStyle:{color:'#f5a305'}}
                  , {name:'城区',value: [114.8933128488, 33.7394200203],itemStyle:{color:'#f5a305'}}
                  , {name:'川汇区',value: [114.7125852195, 33.6322066494],itemStyle:{color:'#f5a305'}}
                  , {name:'西华县',value: [114.4652405407, 33.7823709393],itemStyle:{color:'#f5a305'}}
                  , {name:'商水县',value: [114.4943988556, 33.5159828467],itemStyle:{color:'#f5a305'}}
                  , {name:'项城市',value: [114.8896890542, 33.2858379189],itemStyle:{color:'#f5a305'}}
                  , {name:'沈丘县',value: [115.2037079480, 33.2911114938],itemStyle:{color:'#f5a305'}}
                  , {name:'郸城县',value: [115.2764126124, 33.6370623393],itemStyle:{color:'#f5a305'}}
                  , {name:'鹿邑县',value: [115.3630394498, 33.8740318971],itemStyle:{color:'#f5a305'}}
                  , {name:'太康县',value: [114.8601169006, 34.1325074522],itemStyle:{color:'#f5a305'}}
                  , {name:'扶沟县',value: [114.3855980226, 34.0796808657],itemStyle:{color:'#f5a305'}}

  ]
    var days = ['16日8时', '16日9时', '16日10时', '16日11时', '16日12时', '16日13时', '16日14时', '16日15时', '16日16时', '16日17时', '16日18时', '16日19时', '16日20时', '16日21时', '16日22时', '16日23时', '17日0时', '17日1时', '17日2时', '17日3时', '17日4时', '17日5时', '17日6时', '17日7时', '17日8时'];
    var province = ['新站镇', '鲁台镇', '四通镇', '临蔡镇', '安岭镇', '朱集乡', '豆门乡', '冯塘乡', '刘振屯乡', '王店乡', '大连乡', '葛店乡', '黄集乡', '齐老乡', '郑集乡', '曹河乡', '白楼镇', '项城市', '川汇区', '鹿邑县', '西华县', '太康县', '沈丘县', '商水县', '城区', '扶沟县', '郸城县'];
<!--    var news = ["","","","","","","","","","",""]-->
    var data = [
        [84, 52, 75, 55, 91, 106, 66, 71, 76, 87, 110, 71, 76, 87, 70, 84, 79, 46, 56, 47, 61, 59, 43, 60, 46, 63, 52],
        [83, 80, 85, 55, 84, 94, 83, 79, 87, 89, 86, 84, 87, 75, 82, 94, 73, 54, 62, 40, 76, 88, 59, 71, 61, 75, 57],
        [79, 51, 83, 49, 86, 85, 70, 83, 71, 80, 76, 78, 73, 68, 77, 86, 85, 63, 67, 38, 73, 71, 60, 65, 64, 77, 62],
        [58, 62, 56, 36, 63, 86, 64, 68, 75, 59, 57, 71, 56, 53, 55, 66, 90, 64, 68, 35, 66, 57, 58, 54, 67, 69, 63],
        [0, 57, 37, 17, 58, 71, 63, 59, 52, 52, 39, 59, 40, 34, 56, 67, 61, 62, 60, 42, 65, 51, 56, 48, 52, 63, 60],
        [53, 52, 35, 19, 38, 53, 62, 43, 36, 40, 29, 44, 25, 34, 71, 64, 45, 60, 54, 43, 57, 42, 49, 30, 38, 53, 49],
        [53, 49, 39, 19, 47, 47, 47, 54, 35, 61, 25, 38, 44, 34, 61, 45, 45, 54, 51, 45, 44, 39, 46, 34, 30, 44, 46],
        [47, 46, 46, 19, 47, 43, 71, 44, 39, 51, 33, 39, 35, 54, 61, 35, 42, 47, 51, 65, 46, 42, 30, 40, 31, 38, 42],
        [40, 54, 46, 67, 47, 49, 68, 56, 53, 49, 38, 51, 51, 50, 71, 41, 48, 40, 57, 39, 47, 53, 28, 57, 39, 40, 47],
        [64, 61, 61, 63, 53, 56, 108, 59, 77, 98, 59, 71, 50, 104, 187, 117, 97, 44, 58, 40, 57, 48, 26, 65, 45, 56, 51],
        [86, 150, 146, 279, 88, 123, 161, 96, 220, 206, 110, 92, 206, 136, 527, 204, 96, 47, 64, 66, 78, 69, 29, 77, 52, 74, 68],
        [86, 220, 143, 159, 168, 231, 202, 264, 266, 361, 141, 136, 167, 135, 263, 204, 209, 56, 73, 93, 87, 102, 74, 107, 76, 95, 88],
        [154, 381, 132, 118, 198, 258, 219, 333, 270, 236, 225, 278, 126, 151, 200, 265, 356, 77, 80, 102, 94, 120, 93, 51, 123, 65, 136],
        [178, 290, 125, 81, 144, 166, 204, 239, 172, 245, 237, 245, 120, 149, 123, 188, 223, 103, 79, 104, 80, 116, 125, 70, 135, 65, 197],
        [200, 141, 195, 113, 121, 140, 114, 196, 137, 207, 289, 443, 155, 120, 305, 217, 154, 124, 106, 112, 103, 123, 130, 81, 124, 62, 220],
        [82, 77, 135, 100, 187, 81, 110, 122, 117, 133, 278, 672, 182, 171, 241, 173, 212, 121, 79, 115, 109, 143, 97, 49, 160, 55, 189],
        [82, 56, 161, 66, 167, 73, 78, 94, 67, 68, 162, 507, 191, 142, 104, 74, 73, 95, 34, 67, 89, 122, 55, 55, 126, 82, 122],
        [61, 56, 122, 58, 111, 67, 65, 87, 68, 57, 106, 267, 131, 111, 61, 62, 73, 66, 24, 64, 70, 105, 38, 47, 83, 88, 85],
        [53, 77, 96, 51, 99, 81, 66, 76, 55, 56, 72, 149, 81, 73, 59, 67, 80, 52, 41, 59, 55, 76, 33, 63, 52, 83, 67],
        [53, 63, 89, 49, 88, 64, 48, 50, 91, 67, 64, 130, 73, 66, 60, 75, 80, 53, 41, 52, 46, 69, 35, 66, 60, 81, 71],
        [57, 66, 123, 51, 73, 55, 39, 46, 64, 70, 66, 134, 74, 56, 103, 65, 53, 51, 41, 54, 51, 60, 33, 53, 54, 81, 80],
        [64, 60, 167, 52, 73, 64, 53, 59, 88, 57, 66, 107, 70, 56, 59, 64, 52, 47, 59, 58, 61, 66, 42, 63, 49, 83, 83],
        [64, 56, 170, 52, 72, 74, 54, 60, 123, 74, 70, 105, 78, 59, 59, 71, 75, 45, 67, 58, 66, 60, 43, 81, 60, 84, 80],
        [86, 69, 150, 61, 72, 87, 63, 85, 90, 103, 93, 100, 116, 70, 80, 75, 75, 48, 81, 67, 74, 79, 56, 90, 73, 95, 90],
        [85, 83, 163, 60, 87, 93, 97, 129, 102, 101, 131, 125, 119, 103, 107, 109, 102, 56, 88, 72, 83, 89, 62, 113, 78, 97, 108],

    ];

    var option = {
        baseOption: {

        timeline: {
            axisType: 'category',
            // realtime: false,
            // loop: false,
            autoPlay: true,
            playInterval: 2000,
            symbolSize: 12,
            left: '5%',
            right: '5%',
            bottom: '0%',
            width: '70%',
            // controlStyle: {
            //     position: 'left'
            // },
            data: days,
            tooltip: {
                formatter: days
            },
        },

        tooltip: {
            show: true,
            formatter: function(params) {
                return params.name + '：' + params.data['value']
            },
        },
        visualMap: {
            type: 'piecewise',
            pieces: [{'min':0,'max':50,'label':'0-50μg/m3','color':'#00E400'},
                {'min':51,'max':150,'label':'51-150μg/m3','color':'#FFFF00'},
                {'min':151,'max':250,'label':'151-250μg/m3','color':'#FF7E00'},
                {'min':251,'max':350,'label':'251-350μg/m3','color':'#FF0000'},
                {'min':351,'max':420,'label':'351-420μg/m3','color':'#99004C'},
                {'min':420,'label':'＞420μg/m3','color':'#7E0023'},],
            orient: 'vertical',
            itemWidth: 25,
            itemHeight: 15,
            showLabel: true,
            seriesIndex: [0],

            textStyle: {
                color: '#7B93A7'
            },
            bottom: '10%',
            left: "5%",
        },
        grid: {
            right: '5%',
            top: '20%',
            bottom: '10%',
            width: '20%'
        },
        xAxis: {
            min: 0,
            max: 4000,
            show: false
        },
        yAxis: [{
            inverse: true,
            offset: '2',
            'type': 'category',
            data: '',
            nameTextStyle: {
                color: '#fff'
            },
            axisTick: {
                show: false,
            },
            axisLabel: {
                //rotate:45,
                textStyle: {
                    fontSize: 14,
                    color: '#000000',
                },
                interval: 0
            },
            axisLine: {
                show: false,
                lineStyle: {
                    color: '#333'
                },
            },
            splitLine: {
                show: false,
                lineStyle: {
                    color: '#333'
                }
            },
        }],
        toolbox: {
        right:20,
        show: true,
        feature: {
            mark: {show: true},
            dataView: {show: true, readOnly: false},
            magicType: {
                show: true,
                type: ['pie', 'funnel']
            },
            restore: {show: true},
            saveAsImage: {show: true}
        }
    },
        geo: {
            map: 'china',
            aspectScale: 0.75,
            zoom: 25,
            roam: true,
            center:[114.8673128488, 33.6594200203],
            right: '35%',
            left: '5%',
            label: {
                emphasis: {
                    show: true,
                }
            },
            itemStyle: {
                emphasis: {
                    areaColor: '#00FF00'
                }
            }
        },
        regions: [{
            name: '南海诸岛',
            itemStyle: {
                areaColor: 'rgba(0, 10, 52, 1)',
                borderColor: 'rgba(0, 10, 52, 1)',
                normal: {
                    opacity: 0,
                    label: {
                        show: false,
                        color: "#009cc9",
                    }
                }
            },
        }],
        series: [{
                name: 'mapSer',
                type: 'map',
                map: 'china',
                roam: false,
                geoIndex: 0,
                label: {
                    show: true,
                },
            },
            {
                'name': '',
                'type': 'bar',
                zlevel: 2,
                barWidth: '40%',
                label: {
                    normal: {
                        show: true,
                        fontSize: 14,
                        position: 'right',
                        formatter: '{c}'
                    }
                },
            },
            {
                type: 'effectScatter',
                coordinateSystem: 'geo',
                showEffectOn: 'render',
                zlevel:1,
                rippleEffect: {
                    period: 15,
                    scale: 4,
                    brushType: 'fill'
                },
                hoverAnimation: true,
                label: {
                    normal: {
                        formatter: '{b}',
                        position: 'left',
                        offset: [15, 0],
                        color: 'black',
                        show: true
                    },
                },
                itemStyle: {
                    normal: {
                       color:'#1DE9B6',
                        shadowBlur: 10,
                        shadowColor: '#333'
                    }
                },
                symbolSize: 5,
                data: points
            },
        ],

    },
    animationDurationUpdate: 3000,
    animationEasingUpdate: 'quinticInOut',
    options: []
};
for (var n = 0; n < days.length; n++) {

    var res = [];
    for (j = 0; j < data[n].length; j++) {
        res.push({
            name: province[j],
            value: data[n][j],
        });
    }
    res.sort(function(a, b) {
        return b.value - a.value;
    }).slice(0, 6);

    res.sort(function(a, b) {
        return a.value - b.value;
    });
    var res1 = [];
    var res2 = [];
    for (t = 0; t < 27; t++) {
        res1[t] = res[res.length - 1 - t].name;
        res2[t] = res[res.length - 1 - t].value;
    }
    console.log(res1);
    console.log("----------------");
    console.log(province);
    option.options.push({
        title: [{
<!--                text: days[n] + " " + news[n],-->
                text: days[n],
                textStyle: {
                    color: '#2D3E53',
                    fontSize: 15
                },
                left: 20,
                top: 20,
            },
            {
                show: true,
                text: 'PM10浓度',
                textStyle: {
                    color: '#2D3E53',
                    fontSize: 18
                },
                right: '22%',
                top: '15%'
            }
        ],
        yAxis: {
            data: res1,
        },
        series: [{
            type: 'map',
            data: res
        }, {
            type: 'bar',
            data: res2,
            itemStyle: {
                normal: {
                    color: function(params) {
                        // build a color map as your need.
                        var colorList = [{
                                colorStops: [{
                                    offset: 0,
                                    color: '#FF0000' // 0% 处的颜色
                                }, {
                                    offset: 1,
                                    color: '#990000' // 100% 处的颜色
                                }]
                            },
                            {
                                colorStops: [{
                                    offset: 0,
                                    color: '#00C0FA' // 0% 处的颜色
                                }, {
                                    offset: 1,
                                    color: '#2F95FA' // 100% 处的颜色
                                }]
                            }
                        ];
                        if (params.dataIndex < 3) {
                            return colorList[0]
                        } else {
                            return colorList[1]
                        }
                    },
                }
            },
        }]
    });
}

        myChart.setOption(option);

        </script>
    </body>
</html>